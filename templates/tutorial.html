{% extends "v2-base.html" %}
{% load i18n %}
{% load toc from templatefilters %}

{% get_current_language as LANGUAGE_CODE %}

{% block headauthor %}{{ tut.author.given_name }} {{ tut.author.family_name }} - {{ tut.author.email }}{% endblock %}
{% block headtitle %}{{ tut.title|safe }}{% if tut.subtitle %}: {{tut.subtitle|safe}}{% endif %}{% endblock %}

{% block body %}

  <section class="title">

    <section class="title-text container">
      <h1>{{ tut.title|safe }}</h1>
      {% if tut.subtitle %}<h2>{{tut.subtitle|safe}}</h2>{% endif %}
      <a href="/" class="watermark">HTML5 Rocks</a>
    </section>

    <section class="byline">
      <div class="container">
        <div class="byline-content">
          <section class="author-images">
            <a href="/profiles/#{{ tut.author.key.name }}">
              <img src="/static/images/profiles/{{ tut.author.key.name }}.png" itemprop="photo" alt="{{ tut.author.given_name }} {{ tut.author.family_name }}" title="{{ tut.author.given_name }} {{ tut.author.family_name }}">
            </a>

            {% if tut.second_author %}
              <a href="/profiles/#{{ tut.second_author.key.name }}">
                <img src="/static/images/profiles/{{ tut.second_author.key.name }}.png" itemprop="photo" alt="{{ tut.second_author.given_name }} {{ tut.second_author.family_name }}" title="{{ tut.second_author.given_name }} {{ tut.second_author.family_name }}">
              </a>
            {% endif %}
          </section>

          <section class="meta">
            <div class="authors">
              <strong>By</strong> <a href="/profiles/#{{ tut.author.key.name }}">{{ tut.author.given_name }} {{ tut.author.family_name }}</a>
              {% if tut.second_author %}
                and <a href="/profiles/#{{ tut.second_author.key.name }}">{{ tut.second_author.given_name }} {{ tut.second_author.family_name }}</a>
              {% endif %}
            </div>

            <div class="date">
              <time pubdate><strong>{% blocktrans %}Published{% endblocktrans %}:</strong> {{ tut.publication_date|date:"F dS, Y"}}</time>
              {% if tut.update_date %}
              <time class="updated"><strong>{% blocktrans %}Updated{% endblocktrans %}:</strong> {{ tut.update_date }}</time>{% endif %}
              <span><strong>Comments:</strong> <a href="#disqus_thread" class="load-comments" data-disqus-identifier="{{ disqus_url }}">{% trans "..." %}</a></span>
            </div>
          </section>

          <div class="clear"></div>
        </div>
      </div>
    </section>
  </section>

  <div class="divider"></div>

  {% if redirect_from_locale %}
  <section class="redirect_notification pattern-bg-lighter" lang="{{ redirect_from_locale.lang }}">{{ redirect_from_locale.msg }}</section>
  {% endif %}

  <article class="content-wrapper">
    <nav class="outline toc pattern-bg-lighter">
      <h3>{% trans "Table of Contents" %}</h3>

      {% toc %}
      {% if localizations %}
      <h3>{% trans "Localizations" %}</h3>
      <p>{% trans "This article is additionally available in the following languages:" %}</p>
      <ul>
        {% for alt_locale in localizations %}
        <li><a href="{{ alt_locale.path }}">{{ alt_locale.lang }}</a></li>
        {% endfor %}
      </ul>
      {% endif %}
    </nav>

    <section class="container">
      <div class="content">
        {% block content %}{% endblock %}
      </div>
    </section>
  </article>
  {% include "article_footer.html" %}

{% endblock %}
